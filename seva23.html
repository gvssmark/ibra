

<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>Seva 23</title>
<meta name="theme-color" content="#FFFFFF" />
<style>
.modal {  display: none;  position: fixed;  z-index: 1;    left: 0;  top: 0;  width: 100%;  height: 100%;  overflow: auto;
  background-color: rgb(0,0,0);  background-color: rgba(0,0,0,0.4); }
.modal-content {background-color: #99ffcc;margin:0 auto;padding: 2px;padding-bottom: 2px;border: 1px solid #888;width: 90%;margin-top: 90px;   }
#modalData {margin:auto}
.close {color: red;float: right;;font-weight: bold;}
close:hover,.close:focus {color: #000;text-decoration: none;cursor: pointer;}
@media only screen and (min-width: 400px)  {
  #home, #dataentry,#rep {     margin: auto; width:70%;   }}
@media only screen and (min-width: 800px)  {
  #home, #dataentry,#rep  {     margin: auto; width:50%;   }}
  
table {border-collapse:collapse; width:90%}
input {width:100%; height:25px; background:#E9E7E6; border:none; outline:none}
::placeholder {color:blue; font-size:large; font-family: "Courier New", Courier, monospace;}
* {  box-sizing: border-box;}
input:focus { background:cyan; outline: none }
#dataentry { margin:0 auto;  display:none; padding:5px; border-radius:15px; overflow: hidden; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);     }
h1 {color:red; margin:0 auto; }
#rep {display:none}
</style></head>
<body>


<div id='home'>
<div style='background:black; color:white; height:100'><h2 align=center>ॐ पितृ दैवतायै नम:</h2></div>
<h3>Important Instructions</h3>



<ol>
<li>Sponsorship will be restricted to a max of 75 to 100 sponsors on first cum first serve basis.
<li>Sponsors will have to submit the details in this form, filled up in English only.
<li>Each sponsoror can sponsor a maximum of 3 or 4 occasions only & on each occasion names of a couple ( like Grandmother / Grandfather , Mother /Father , Father in Law / Mother in Law ). 
<li>In case of a single deceased , a second name can be provided.
<li>CONTRIBUTION PER SPONSOR PER OCCASION WILL BE Rs 2000/- which can be remitted to the following a/c of Smt B Visalakshi. 
SB A/c. No. 473583196
IFSC IDIB000H013, 
Hyderabad Main branch.
<li>LAST DATE FOR JOINING SEVA WILL BE 27/9/23 for SEVA FROM 30/9/23 to 7/10/23.
<li>LAST DATE FOR SEVA FROM 8/10/23 to 14/10/23 will be 2/10/23.
<li>For one date / Occasion you can add maximum of two names.
</ol> 
<button onclick='showDataEntry()'>Accept and Proceed</button><button onclick='shreport()'>Report</button>
</div>

<div id='dataentry'>
<h1 align=center>Seva 2023</h1>
<form  name='submit-to-google-sheet'>
Date of Seva<br><input type="date"  name="date"    min='2023-09-30' max='2023-10-14' required ><br>
Sponsor 1 Name<br> <input type="text"  name="sponsor1"  placeholder="Sponsor1 Name"  required inputmode='text' ><br>
Sponsor 1 Gotra<br> <input type="text"  name= "gotra1"  placeholder="Sponsor1 Gotra"  inputmode='text' required ><br>
Mobile No <br><input type='mobile' name='mob' id='mob' placeholder='Mobile No'  inputmode='tel'   pattern="[6-9]{1}[0-9]{9}"  required  ><br>
Sponsor 2 Name<br> <input type="text"  name="sponsor2"  placeholder="Sponsor1 Name"  inputmode='text'  ><br>
Sponsor 2 Gotra<br> <input type="text"  name="gotra2"  placeholder="Sponsor1 Gotra"  inputmode='text'  ><br>
Pitru Devata 1 Name <br><input type="text"  name="pitru1"  placeholder="Pitrudevata1 Name"  inputmode='text' required ><br>
Pitru Devata 1 Relationship to Sponsor1 <br><input type="text"  name="relation1"  placeholder="Father / Mother/"  inputmode='text' required ><br>

Pitru Devata 1 Gotra <br><input type="text"  name="pitrugotra1"  placeholder="Pitrudevata1 Gotra"  inputmode='text' required ><br>
Pitru Devata 2 Name <br><input type="text"  name="pitru2"  placeholder="Pitrudevata2 Name"  inputmode='text'  ><br>
Pitru Devata 2 Relationship to Sponsor1 <br><input type="text"  name="relation2"  placeholder="Father / Mother/"  inputmode='text'  ><br>

Pitru Devata 2 Gotra <br><input type="text"  name="pitrugotra2"  placeholder="Pitrudevata2 Gotra"  inputmode='text'  ><br>
<br>
    <button  style="width:100%; background:yellow; font-size:large; color:red;;border:none; height:30px; border-radius:25px;  " type="submit" >Submit</button>
</form>
</div>
<div id='rep' ><h1>Data Report</h1>
<p id='report'></p>
<button onclick='shhome()' style='position:fixed; top:10px;right:50px; height:50px; background:red; border-radius:50px; border:none; color:white;'>Home</button>
<p id='temp1'></p>
</div>

<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p id=temp></p>
  </div>
</div>


<script>

String.prototype.toTitle = function() {  return this.replace(/(^|\s)\S/g, function(t) { return t.toLowerCase().toUpperCase() });}

function shreport(){
getMyData()
document.getElementById('home').style.display='none'
document.getElementById('rep').style.display='block'
}

function shhome(){
document.getElementById('rep').style.display='none'
document.getElementById('home').style.display='block'

}

function showDataEntry(){document.getElementById('dataentry').style.display='block'
document.getElementById('home').style.display='none'
}

function shrep(){
document.getElementById('dataentry').style.display='none'
document.getElementById('rep').style.display='block'
}

scriptURL='https://script.google.com/macros/s/AKfycbwzSDamzZU9UiZCpmFDUNVNSNoFm8R3eYJt9Dj-U1rmi52YRwCz_EEqcM1zuTY1mn2X/exec'
const form = document.forms['submit-to-google-sheet']
  form.addEventListener('submit', e => {
    e.preventDefault()
    fetch(scriptURL, { method: 'POST', body: new FormData(form)})
form.reset();
//alert('hi')
//shreport()
document.getElementById('dataentry').style.display='none'
document.getElementById('home').style.display='block'
  })
  
url ='https://script.google.com/macros/s/AKfycbwCJfPX8BSP099jkescIBUjJ1mcUByRYBexgpK14LxRDCgWRUI8gAGkSSOvHZef3crRdg/exec'
async function getMyData() {
response = await fetch(url)
tdata = await response.json()
data= tdata.map(([date,sponsor1,gotra1,mob,sponsor2,gotra2,pitru1,pitrugotra1,pitru2,pitrugotra2,rel1,rel2,slno ]) => ({ date,sponsor1,gotra1,mob,sponsor2,gotra2,pitru1,pitrugotra1,pitru2,pitrugotra2,rel1,rel2,slno,}))
data.shift()

data.sort((a, b) => a.mob - b.mob)
datarep=''
//data = data.filter(a=> a.slno>0)
data.forEach((a,b)=> a.slno = b+1)

data.forEach(a=> datarep+= `<tr id=${a.slno} onclick='shdata(this.id)'><td>${a.mob}<td>${a.sponsor1.toLowerCase().toTitle()}(${a.slno})`)
document.getElementById('report').innerHTML = `Data Sorted on Mobile No. <br><table border=1>${datarep}</table><br>`
}


var modal = document.getElementById("myModal");
function shdata(sl){
//alert(sl)
repdata=data.filter(a=> a.slno === +sl)
r=repdata[0]
repdatarep=`Date: ${r.date}<br><br>
Sponsor 1:  ${r.sponsor1.toTitle()} (${r.gotra1.toTitle()})<br><br>
Sponsor 2:  ${r.sponsor2.toTitle()} (${r.gotra2.toTitle()})<br><br>
Pitru 1: <br>${r.pitru1.toTitle()}-${r.rel1.toTitle()} <br>(${r.pitrugotra1.toTitle()}) <br><br>

Pitru 2:<br> ${r.pitru2.toTitle()}-${r.rel2.toTitle()} <br> (${r.pitrugotra2.toTitle()})<br>

`
document.getElementById('temp').innerHTML = repdatarep
modal.style.display = "block"
//alert(repdatarep)
}


var span = document.getElementsByClassName("close")[0];
span.onclick = function() {
  modal.style.display = "none";
}
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}

</script>
</body>
</html>

