


<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<title>Seva 23</title>
<meta name="theme-color" content="#FFFFFF" />
<style>
@media only screen and (min-width: 400px)  {
  #home, #dataentry,#rep {     margin: auto; width:100%;   }}
@media only screen and (min-width: 800px)  {
  #home, #dataentry,#rep  {     margin: auto; width:50%;   }}
  
table {border-collapse:collapse; width:100%}
h1 {color:red; margin:0 auto;  }
.mob {background:black; color:white}
.headings{ color:red; }
.blank {height:20px; background:white; color:white}
</style></head>
<body>

<div id='rep' ><h1 align=center>IBRA-IBRSS - <span onclick='getMyData()'>Data</span> <span onclick='datewise()
'>Report</span></h1>

<p id='report'></p>
</div>
<script>
url ='https://script.google.com/macros/s/AKfycbwCJfPX8BSP099jkescIBUjJ1mcUByRYBexgpK14LxRDCgWRUI8gAGkSSOvHZef3crRdg/exec'
async function getMyData() {
response = await fetch(url)
tdata = await response.json()
data= tdata.map(([date,sponsor1,gotra1,mob,sponsor2,gotra2,pitru1,pitrugotra1,pitru2,pitrugotra2,rel1,rel2,slno ]) => ({ date,sponsor1,gotra1,mob,sponsor2,gotra2,pitru1,pitrugotra1,pitru2,pitrugotra2,rel1,rel2,slno,}))
data.shift()

data.sort((a, b) => a.mob - b.mob)
datarep=''
data.forEach((a,b)=> a.slno = b+1)
data.forEach(a=> datarep+= `<tr><td class='mob'><b> ${a.mob}</b> - Date: ${a.date} - Sl No: ${a.slno}<tr><td><span class='headings'>Sponsor1:</span>  ${a.sponsor1} <br><span class='headings'>Gotra:</span> ${a.gotra1}<tr><td><span class='headings'>Sponsor 2:</span> ${a.sponsor2}<br><span class='headings'>Gotra:</span> ${a.gotra2}<tr><td><span class='headings'>Pitru 1: </span>${a.pitru1}<br><span class='headings'>Gotra:</span> ${a.pitrugotra1} <br><span class='headings'>Relation:</span> ${a.rel1}<tr><td><span class='headings'>Pitru 2:</span> ${a.pitru2}<br><span class='headings'>Gotra:</span> ${a.pitrugotra2} <br><span class='headings'>Relation:</span> ${a.rel2}<tr class='blank'><td>1 `)

document.getElementById('report').innerHTML = `Data Sorted on Mobile No. <br><table border=1>${datarep}</table><br>`
}

getMyData()

function datewise(){
data.sort((a, b) => a.date.replaceAll("-","")
 - b.date.replaceAll("-","")
)
datarep=''
data.forEach(a=> datarep+= `<tr><td class='mob'><b> ${a.mob}</b> - Date: ${a.date} - Sl No: ${a.slno}<tr><td><span class='headings'>Sponsor1:</span>  ${a.sponsor1} <br><span class='headings'>Gotra:</span> ${a.gotra1}<tr><td><span class='headings'>Sponsor 2:</span> ${a.sponsor2}<br><span class='headings'>Gotra:</span> ${a.gotra2}<tr><td><span class='headings'>Pitru 1: </span>${a.pitru1}<br><span class='headings'>Gotra:</span> ${a.pitrugotra1} <br><span class='headings'>Relation:</span> ${a.rel1}<tr><td><span class='headings'>Pitru 2:</span> ${a.pitru2}<br><span class='headings'>Gotra:</span> ${a.pitrugotra2} <br><span class='headings'>Relation:</span> ${a.rel2}<tr class='blank'><td>1 `)

document.getElementById('report').innerHTML = `Data Sorted on Date. <br><table border=1>${datarep}</table><br>`


}
</script>
</body>
</html>

