
<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBRA-APTS-Insurance</title>
    <style>
body {
            width: 360px;
            background-color: #fff2cc;
            margin-left: 0px;
            font-size:small;
            overscroll-behavior: contain;
        }
        #topHead {
            text-align: center;
            width: 360px;
            height: 50px;
            position: fixed;
            background-color: red;
            top: 0px;
            color: white;
        }


        table {
            /* Not required only for visualizing */
            
            border-collapse: collapse;
            ;
            width: 95%;
            margin-left: 5px;
            margin-right: 1px;
            border: 1px soild black;
            
        }
      .bottomdiv {
            bottom: 0px;
            background: green;
            position: fixed;
            width: 360px;
            height: 40px;
color: white;
display:none;
        }

</style>
</head>

<body>

    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h4 align=center id="nameHeader"></h4>
            <p id="modalData"> </p>
        </div>
    </div>

    <div class="container">
        <div id="topHead">
            <h3 align=center>Indian Bank Retirees' Association, (AP&TS)<br>Insurance List</h3>
        </div>
     



<div id="div2">
            <p id="details"></p>
        </div>
        <div id="bottomdiv" class="bottomdiv" onclick="homeClick()">
            <h3 align=center >Home</h3>
        </div>
    </div>




    <script>

 monthsArray = ["", "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
membList="<br><h4 align=center>Click on Name to get Details</h4><table  border=1><tr><td>SR No<td>Name"
    
        url = 'https://script.google.com/macros/s/AKfycbwJ1VlGrnkV1Gv4Jei1OBHPjCLPjjJ6-Kc_BnEUcvhaUtGRYFg/exec'
        async function getMyData() {
            response = await fetch(url)
            data = await response.json()
            tempData = data["user"]
            
       
            
             tempData.forEach(function (a) { membList += "<tr><td>" + a.srno +"<td> <span onClick='nameclick(this.id)' id=" + a.srno + ">" + toTitleCase(a.name) + "</span>" })
             document.getElementById('details').innerHTML =  membList + "</table><br><br>"
        }
getMyData()
        
        function toTitleCase(str) {
  return str.replace(
    /\w\S*/g,
    function(txt) {
      return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
    }
  );
}
function nameclick(srno){
//alert(srno)
 document.getElementById('details').innerHTML =  ""
  membData = tempData.filter(a => a.srno === srno* 1)
   dob = new Date(membData[0].dob)
   spdob = new Date(membData[0].spdob)
   nomdob = new Date(membData[0].nomdob)
    dob=dob.getDate()+'-'+monthsArray[dob.getMonth()+1]+'-'+dob.getFullYear()
    spdob=spdob.getDate()+'-'+monthsArray[spdob.getMonth()+1]+'-'+spdob.getFullYear()
    nomdob=nomdob.getDate()+'-'+monthsArray[nomdob.getMonth()+1]+'-'+nomdob.getFullYear()
    //bm= mydata.bm?mydata.bm:0;
 indMember=`<br><table border=1>
<tr><td> SR No:<td>${membData[0].srno} 
 <tr><td> Name:<td>${membData[0].name}
 <tr><td> Date of Birth:<td>${dob} 
 <tr><td> Spouse Name:<td>${membData[0].spname} 
 <tr><td> Spouse Date of Birth:<td>${spdob} 
 <tr><td> Adhar :<td>${membData[0].adhar} 
 <tr><td> PAN:<td>${membData[0].pan} 
 <tr><td> Mobile No:<td>${membData[0].mobile} 
 <tr><td> Email ID:<td>${membData[0].email} 
 <tr><td> Address:<td>${membData[0].address} 
 <tr><td> City:<td>${membData[0].city} 
 <tr><td> PIN Code:<td>${membData[0].pincode} 
 <tr><td> Insurance Base:<td>Rs.${membData[0].base} 
 <tr><td> Super Topup:<td>Rs.${membData[0].topup} 
 <tr><td> Premium Paid:<td>Rs.${membData[0].premium} 
 <tr><td> Nominee Name:<td>${membData[0].nomname} 
 <tr><td> Nominee DOB:<td>${nomdob} 
  
 `
 
 document.getElementById('details').innerHTML =indMember
 document.getElementById("bottomdiv").style.display = "block";
 
}
 
 function homeClick(){
 document.getElementById('details').innerHTML =  membList + "</table><br><br>"
 document.getElementById("bottomdiv").style.display = "none";
 }
 
 
 
    </script>
</body>

</html>
