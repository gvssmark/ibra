<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>IBAP</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      margin: 0;
      background-color: white;
      color: black;
      max-width: 480px;
      margin: 0 auto;
    }

    .mobile-container {
      max-width: 480px;
      margin: auto;
      background-color: #f1f1f1;
      height: 100vh;
      border-radius: 10px;
      overflow-y: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
    }

    .sticky-header {
      position: sticky;
      top: 0;
      z-index: 100;
      background-color: #1e1e1e;
      backdrop-filter: blur(6px);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
    }

    .topnav {
      background-color: #fd0202;
      padding: 10px 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color:white;
    }

    .topnav .active {
      font-weight: bold;
      font-size: 18px;
        }

 .topnav a.icon {
  font-size: 24px;
  cursor: pointer;
  padding: 8px;
  border-radius: 50%;
  background-color: #fff;
  color: #fd0202;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  transition: transform 0.2s, background-color 0.3s;
}

.topnav a.icon:hover {
  transform: scale(1.1);
  background-color: #ffe5e5;
}
    #myLinks {
      display: none;
      position: absolute;
      top: 50px;
      left: 0;
      width: 100%;
      background: grey;
      z-index: 99;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    #myLinks a {
      color: white;
      padding: 12px 16px;
      text-decoration: none;
      font-size: 16px;
      display: block;
      border-bottom: 1px solid rgba(255,255,255,0.2);
    }

    #searchInput {
      width: 100%;
      padding: 12px;
      box-sizing: border-box;
      border: none;
      outline: none;
      font-size: 16px;
      background-color: #2c2c2c;
      color: white;
      border-bottom: 1px solid #444;
    }

    #mainContent {
      padding: 16px;
      overflow-y: auto;
      max-height: calc(100vh - 100px);
    }

    section {
      display: none;
      padding: 16px;
      background-color: #e96d6db0;
      margin-bottom: 10px;
      border-radius: 8px;
      transition: opacity 0.3s ease;
    }

    section.active-section {
      display: block;
      opacity: 1;
    }
.cards-container {
      display: flex;
      flex-wrap: wrap;
    }

    .card {
      border: 1px solid #ccc;
      padding: 10px;
      margin: 8px;
      border-radius: 6px;
      width: 100%;
    }
    
    #goTopBtn {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 48px;
  height: 48px;
  background-color: #fd0202;
  color: white;
  font-size: 24px;
  border-radius: 50%;
  text-align: center;
  line-height: 48px;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
  z-index: 999;
  transition: background-color 0.3s;
}

#goTopBtn:hover {
  background-color: #c70000;
}

#goTopBtn {
  display: block;
}
   </style>
</head>
<body>
<div id="goTopBtn" onclick="scrollToTop()">↑</div>
<div class="mobile-container">
  <div class="sticky-header">
    <div class="topnav">
      <div class="active">Indian Bank Retirees' Association</div>
      <a class="icon" onclick="toggleMenu()">☰</a>
      <div id="myLinks">
    <div onclick="filterCards('HYD')">HYDERABAD</div>
    <div onclick="filterCards('VIJ')">VIJAYAWADA</div>
    <div onclick="filterCards('GOD')">GODAVARI</div>
    <div onclick="filterCards('EAB')">E ALLAHABAD BANK</div>
    <div onclick="filterCards('VSP')">VISAKHAPATNAM</div>
    <div onclick="filterCards('SEE')">SEEMA</div>
    <div onclick="filterCards('OTH')">OTHER STATES</div>
    
    
    
    <div onclick="filterCards('ALL')">Show All</div>   
        
      </div>
    </div>
    <input type="text" id="searchInput" placeholder="Search...">
  </div>

  <div id="mainContent">
    <section id="section1" class="active-section">
      <div id="cards" class="cards-container"></div>
    </section>
  </div>
</div>

<script>
function toggleMenu() {
  const menu = document.getElementById("myLinks");
  menu.style.display = menu.style.display === "block" ? "none" : "block";
}

function showSection(id) {
  const sections = document.querySelectorAll("section");
  sections.forEach(sec => sec.classList.remove("active-section"));
  document.getElementById(id).classList.add("active-section");
  document.getElementById("myLinks").style.display = "none";

  // Smooth scroll to top
  document.getElementById('mainContent').scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

 let addBookData = [];

    async function readCachedData(key) {
      const cache = await caches.open('addbook');
      const response = await cache.match(key);
      if (!response || !response.ok) return null;
      try {
        return await response.json();
      } catch {
        return null;
      }
    }

    async function init() {
      [addBookData, photoData] = await Promise.all([
        readCachedData('/custom/addbookdata.json'),
        readCachedData('/custom/addbookphotodata.json')
      ]);
      if (addBookData) renderCards(addBookData.filter(a=> a.name !=="").sort((a, b) => a.name.localeCompare(b.name)));
    }

    function renderCards(data) {
      const container = document.getElementById('cards');
      container.innerHTML = '';
      data.forEach(person => {
        const div = document.createElement('div');
        div.className = `card ${person.area}`;
        div.innerHTML = `
          <div style="text-align: center;"><strong>${person.name}</strong></div>
          <div style="text-align: center; font-size:small; color:blue;">Mem No: ${person.id} ▪️ Mobile: ${person.mobile1} ▪️ Place: ${person.place}</div>
        `;
        container.appendChild(div);
      });
    }

    function filterCards(area) {
     // document.getElementById('dropdownMenu').style.display = 'none';
      if (area === 'ALL') {
        renderCards(addBookData);
      } else {
        const filtered = addBookData.filter(p => p.area.includes(area));
        renderCards(filtered);
      }
       document.getElementById("myLinks").style.display = "none";
    }

    function toggleDropdown() {
      const menu = document.getElementById('dropdownMenu');
      menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
    }

    init();
function scrollToTop() {
  document.getElementById('mainContent').scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}

document.querySelector('.mobile-container').addEventListener('scroll', () => {
  const btn = document.getElementById('goTopBtn');
  const scrollY = document.querySelector('.mobile-container').scrollTop;
  btn.style.display = scrollY > 100 ? 'block' : 'none';
});



</script>

</body>
</html>
