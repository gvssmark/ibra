

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<style>
body{font-size:SMALL; BACKGROUND:POWDERBLUE}
p{ text-align: center;}
 h6{color:red; text-align: center; }
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type=number] {
  -moz-appearance: textfield;
}
h1 {
  color: white;
  text-shadow: 1px 1px 2px black, 0 0 25px blue, 0 0 5px darkblue;
}
</style>
</head>
<body>
<div id='main' style="display:none; font-size:large; text-align:center; border:5px; width:95vw; margin:auto; margin-top:50px; ">
<h1>You have Successfully submitted the data.<br><br><br> Membership Number will be communicated to you!</h1>
</div>

<div id='general' >
<h6>Indian Bank Retirees' Association (AP & TS)</h6>

<ol>
<li>1Membership is open only for Indian Bank or eAllahabad Bank Retirees. </li><li>Pension Account Number provided herein will be verified in Indian Bank for credit of pension.</li><li>On successfull verification the membership number will be allotted.</li><li>Remit the membership firts, get the remittance reference number and then only proceed to fill the form.</li><li>If the applicant is from other than the intended bank, membership fee will be forefieted.</li></ol> <br>
<button onclick='contin()' class="btn btn-primary">Agree and Continue</button>
</div>
<div id='dataform' style='display:none;'>
<div class="container mt-3">
  <h6>Indian Bank Retirees' Association (AP & TS)</h6>
  <p >Membership Data Entry Form</p>
  <form  name='submit-to-google-sheet'>
    <div class="form-floating mb-3 mt-3">
      <input type="number" class="form-control" onfocusout="myFunction()" name="pensionacno"  min="100000001" max="99999999999"  id='pensionacno'  placeholder="a" required>
      <label for="pensionacno">Pension Account No:</label>
    </div>
    
   <div class="form-floating mb-3 mt-3">
      <input type="number" class="form-control" name="srno"   min="1" max="999999"  placeholder="a" required>
      <label for="srno">SR No:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="remittancerefno"  placeholder="a"  required>
      <label for="remittancerefno">Remittance Ref No:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="name"  placeholder="a"  required>
      <label for="name">Name of the Pensioner:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="add1"  placeholder="a"  required>
      <label for="add1">House No / Flat No / Plot No:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="add2"  placeholder="a"  required>
      <label for="add2">Area / Apartment / Building Name:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="add3"   placeholder="a"  required>
      <label for="add3">Locality:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="add4"  placeholder="a"  required>
      <label for="add4">Vill / Town / City:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="district"  placeholder="a"  required>
      <label for="district">District:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="state"  placeholder="a"  required>
      <label for="state">State:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="number" class="form-control" name="pin"   pattern="[1-8]{1}[0-9]{5}" placeholder="a"  required>
      <label for="pin">PIN Code:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="tel" class="form-control" name="mobileno1"  pattern="[6-9]{1}[0-9]{9}"  placeholder="a"  required>
      <label for="mobileno1">Mobile 1:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="tel" class="form-control" name="mobile2"  pattern="[6-9]{1}[0-9]{9}" placeholder="a">
      <label for="mobile2">Mobile 2:</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="tel" class="form-control" name="fixedline"    pattern="[1-8]{1}[0-9]{9}" placeholder="a">
      <label for="fixedline">Fixed Line. (STD Code +Number. 0 not required)</label>
        </div>
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="pensionbranch"  placeholder="a"  required>
      <label for="pensionbranch">Pension Branch:</label>
        </div>
        
 <div class="form-floating mb-3 mt-3">
      <input type="text" class="form-control" name="spousename"  placeholder="a"  required>
      <label for="spousename">Name of the Spouse:</label>
        </div>
  <div class="form-floating mb-3 mt-3">
      <input type="email" class="form-control" name="email"  placeholder="a"  required>
      <label for="email">Email:</label>
  </div>
 <div class="form-floating mb-3 mt-3">
   <select class="form-select"  name="retiredfrom"  placeholder="a"  required>
    <option>Indian Bank</option>
    <option>Allahabad Bank</option>
    </select>
  <label for="retiredfrom" class="form-label">Retired from:</label>
          </div>

 <div class="form-floating mb-3 mt-3">
   <select class="form-select"  name="pensiontype"   placeholder="a" required>
    <option>Service</option>
    <option>Family</option>
    </select>
  <label for="pensiontype" class="form-label">Pension Type:</label>
          </div>


 
    
    
    
    
    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
<script>

  const scriptURL = 'https://script.google.com/macros/s/AKfycbz6Cczs67Bg9m38k9LvvvjBRmc_8S69TkjAhTH18SVc6zxkZqRu/exec'
  const form = document.forms['submit-to-google-sheet']

  form.addEventListener('submit', e => {
    e.preventDefault()
    fetch(scriptURL, { method: 'POST', body: new FormData(form)})
 //alert("Successfully Submitted")
 
form.reset();
document.getElementById("main").style.display = "block";
 document.getElementById("dataform").style.display = "none";  
  })
 function contin(){
  document.getElementById("general").style.display = "none";
  document.getElementById("dataform").style.display = "block";
  
  }

function myFunction(){
acno=document.getElementById('pensionacno').value
if (isvalidAcno(acno) == false){
document.getElementById('pensionacno').style.color='red'
document.getElementById('pensionacno').focus()
}
else{document.getElementById('pensionacno').style.color='black'}

}

function cbsc(acno){
  myval=0;
  acno =acno.toString()
  l=acno.toString().length
  for (j=1; j<=l; j++)   {
  dval     =acno.substr(l-j,1)*1;    // digit value
  dpos    =j;                               // digit position                  
  digival  = DvDp(dval,dpos);    // pass the above values to DvDp function to get value for the above
  myval=myval+digival ;           // cumulate the values and arrive check digit 
    }
  return ( myval %10 ); 
}


function DvDp(dv, dp) // Pass Digit Value and Digit positon to this function.
{
for (i=1; i<dp; i++) {
  dv = dv*2
  if (dv>11) {     dv= dv-11  }
}  
return dv;
} 


function isvalidAcno(a){
compCD = cbsc(a.toString().slice(0,a.toString().length-1))
givencd = a.toString().substr(-1)
return compCD == givencd
}


</script>
</body>
</html>
